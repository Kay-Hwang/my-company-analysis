<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Jekyll이 빌드 시점에 _data/history/[series_id].json 파일의 데이터를 삽입합니다.
    const historicalData = null;

    if (!historicalData || historicalData.length === 0) {
        document.querySelector('section.bg-white').innerHTML = '<p class="text-center text-red-500">이 지표의 상세 데이터를 불러올 수 없습니다.</p>';
        return;
    }

    const labels = historicalData.map(d => d.date);
    const values = historicalData.map(d => d.value === '.' ? null : parseFloat(d.value));

    new Chart(document.getElementById('indicator-chart'), {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: '다우 존스 산업평균지수',
                data: values,
                borderColor: '#0077B6', borderWidth: 2, pointRadius: 0,
                fill: true, backgroundColor: 'rgba(0, 119, 182, 0.1)'
            }]
        },
        options: {
            responsive: true, maintainAspectRatio: false,
            scales: { x: { type: 'time', time: { unit: 'year' } } }
        }
    });
});
</script>