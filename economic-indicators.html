---
layout: default
title: Economic Indicators
---

<style>
    .placeholder { background-color: #e5e7eb; border-radius: 0.25rem; min-height: 1.2rem; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
</style>

<main class="container mx-auto p-4 md:p-8">
    <header class="text-center my-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900">핵심 경제 지표</h1>
        <p id="last-updated" class="mt-4 text-lg text-gray-600"><span class="placeholder w-48 h-6 inline-block"></span></p>
    </header>

    <div class="space-y-12">
        <section><h2 class="text-2xl font-bold text-slate-800 mb-4 border-b pb-2">인플레이션</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="group-inflation"></div></section>
        <section><h2 class="text-2xl font-bold text-slate-800 mb-4 border-b pb-2">고용 시장</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="group-labor"></div></section>
        <section><h2 class="text-2xl font-bold text-slate-800 mb-4 border-b pb-2">성장 및 소비</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="group-growth_consumption"></div></section>
        <section><h2 class="text-2xl font-bold text-slate-800 mb-4 border-b pb-2">금리</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="group-interest_rates"></div></section>
    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', async function() {
    const G_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyxghT3fhJF1se7AN6H9Z8oZkUj15TKEcFnAuPR5G5wgO77E8v1VpFNDvRovX5b7s0Q/exec'; // 🚨 실제 URL로 교체하세요!
    // ✨ 1. Jekyll의 기본 주소(baseurl)를 JavaScript 변수로 가져옵니다.
    const baseUrl = "{{ site.baseurl }}";

    function formatValue(key, value) {
        if (value === 'N/A' || value === null || isNaN(value)) return 'N/A';
        if (key === 'joblessClaims') return (value / 1000).toFixed(0) + 'K';
        if (key === 'gdp') return value.toFixed(1) + '%';
        if (key === 'retailSales') return '$' + (value / 1000).toFixed(1) + 'B';
        return value.toFixed(2) + '%';
    }

    function createIndicatorCard(key, data) {
        // ✨ 2. 링크를 만들 때, baseUrl을 앞에 붙여줍니다.
        const detailPageUrl = `${baseUrl}/${key}.html`;
        
        return `
            <a href="${detailPageUrl}" class="bg-white p-6 rounded-xl shadow-lg transition-transform hover:-translate-y-1 hover:shadow-xl block">
                <h3 class="text-lg font-semibold text-gray-600">${data.name}</h3>
                <p class="text-4xl font-bold text-slate-800 mt-2">${formatValue(key, data.value)}</p>
                <p class="text-xs text-gray-400 mt-1">(${data.date})</p>
            </a>
        `;
    }

    try {
        const response = await fetch(G_SCRIPT_URL);
        const result = await response.json();
        
        if (result.error || !result.indicators) throw new Error("Data fetch failed");
        
        const indicators = result.indicators;
        
        for (const groupName in indicators) {
            const groupEl = document.getElementById(`group-${groupName}`);
            if (groupEl) {
                groupEl.innerHTML = '';
                for (const itemKey in indicators[groupName]) {
                    const itemData = indicators[groupName][itemKey];
                    if(itemData && itemData.value !== 'N/A') {
                        groupEl.innerHTML += createIndicatorCard(itemKey, itemData);
                    }
                }
            }
        }

        document.getElementById('last-updated').innerText = `최종 업데이트: ${result.lastUpdated}`;
        document.getElementById('last-updated').classList.remove('placeholder');

    } catch (error) {
        console.error('Error updating dashboard:', error);
        document.getElementById('last-updated').innerText = '데이터 업데이트에 실패했습니다.';
    }
});
</script>